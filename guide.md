# 使用指南

日日記是一款極簡風格的記帳應用程式，並針對**旅居日本、頻繁旅日者**的使用需求設計，不同於僅做顯示換算的傳統記帳軟體，我們提供：

- **雙幣紀錄**：以**原始消費幣別** (例如：日幣 JPY) 記錄每一筆交易，同時以您的**原始消費幣別**檢視支出，不受未來匯率波動影響。也具有**雙幣別支出管理**，分別顯示台幣與日幣的總支出。
- **時區追蹤 **：自動捕捉每筆紀錄的**時區**。永遠反映您當地時間的實際消費，保持日誌的時間一致性。
- **資料主權與匯出**：您的財務資料完全屬於您。我們提供完整的 **CSV 與 JSON 匯出**功能，讓您可以自由備份、遷移資料，或將數據匯入 Excel/Google Sheets 進行個人化分析。
- **線上使用 × 應用程式二合一**：無需複雜安裝程序，直接在瀏覽器上使用，也可**一鍵下載到手機**成為獨立應用程式。獨特的**背景傳輸技術**結合了傳統應用的立刻存檔優點，無論網路連線狀態如何，您的每筆記帳都會**即時保存到本機**，同時在背景自動同步到雲端。
---

## <span class="material-symbols-rounded">list</span> 目錄
- [行動裝置體驗 (PWA)](#行動裝置體驗-pwa)
- [應用程式模式](#應用程式模式)
- [記帳操作](#記帳操作)
- [專案與旅行管理](#專案與旅行管理)
- [分享連結](#分享連結)
- [資料備份與匯出](#資料備份與匯出)
- [進階功能](#進階功能詳解)
    - [分帳邏輯與結清](#分帳邏輯與結清)
    - [資料主權：備份與遷移](#資料主權備份與遷移)
    - [隱私分享與權限控制](#隱私分享與權限控制)
    - [幣別與時區精準度](#幣別與時區精準度)
    - [進階統計篩選](#進階統計篩選)
    - [總覽頁面運算邏輯](#總覽頁面運算邏輯)
- [帳戶與資料安全](#帳戶與資料安全)
- [常見問題](#常見問題)

---

## <span class="material-symbols-rounded">smartphone</span> 行動裝置體驗 (PWA)

**Web × App 二合一：免下載也能擁有原生體驗**

無需前往應用商店，直接在瀏覽器開啟即可使用。透過 **PWA (Progressive Web App)** 技術，您可以一鍵將日日記「加入主畫面」，獲得隱藏網址列的全螢幕原生 App 體驗。

支援**離線記帳與背景同步**，即使收訊不佳時，紀錄也會先存於手機本機，待連網後自動同步至雲端試算表。

### 如何安裝
- **iOS (Safari)**：點擊分享按鈕 (帶有向上箭頭的方框)，選擇 **「加入主畫面」 (Add to Home Screen)**。
- **Android (Chrome)**：點擊右上角的三點選單，選擇 **「安裝應用程式」** 或 **「加入主畫面」**。

---

## <span class="material-symbols-rounded">person</span> 應用程式模式

本應用程式主要分為兩種運作模式：

### 訪客模式
- 適合快速體驗或極度重視隱私的用戶。
- 資料僅儲存在您瀏覽器的 **Local Storage** 中，不經過雲端。
- **警告**：清除瀏覽器快取可能會導致資料遺失。

### 登入模式
- 使用 **Google 帳號** 登入後啟用。
- 資料自動同步至安全的雲端資料庫。
- 可在不同裝置間無縫存取您的所有紀錄。

---

## <span class="material-symbols-rounded">edit</span> 記帳操作

### 1. 基礎記帳
1. 點擊導航列的 **新增** （+）按鈕。
2. 選擇類型：**支出**、**收入** 或 **收款** (用於債務結清)。
3. 輸入 **金額** 與 **項目名稱**。
4. 選擇 **分類** 與 **支付方式**。

### 2. 多幣別支援
- 使用頂部 header 的切換開關，隨時在 **JPY (日幣)** 與 **TWD (台幣)** 之間切換顯示。
- 系統會根據 **設定** 中的匯率進行即時換算顯示。

---

## <span class="material-symbols-rounded">flight</span> 專案與旅行管理

使用 **專案 (Projects)** 來歸類特定活動的開支，例如「關西五日遊」。

1. 在 **設定** 中建立專案，設定名稱與日期範圍。
2. 記帳時，系統會根據日期自動為您預選對應的專案。
3. 使用 **統計 (Stats)** 頁面來分析特定專案的總花費。

---

## <span class="material-symbols-rounded">link</span> 分享連結

將您的記帳紀錄分享給旅伴或家人，而無需給予帳號權限。

1.前往 **設定** > **分享連結**。
2. 建立連結並設定 **範圍**：
    - **全部**：分享所有紀錄。
    - **日期範圍**：僅分享特定日期內的紀錄。
    - **專案**：僅分享特定專案的紀錄。
3. 設定隱私：可選擇隱藏朋友姓名或專案標題。
4. 複製網址傳送給對方。他們將會看到一個 **唯讀總覽頁面**。

---

## <span class="material-symbols-rounded">save</span> 資料備份與匯出

您可以將資料下載到裝置，或備份至雲端硬碟。

### 1. 雲端存檔 (Google Drive)
將完整資料庫備份至您的 Google Drive。系統會儲存兩份檔案：
- **.json 檔**：用於系統還原。
- **Google Sheet 試算表**：方便您直接檢視與分析。

### 2. 匯出檔案 (Export - ZIP)
將本地資料打包為 **.zip** 檔下載，包含：
- **Backup.json**：完整的交易、分類與設定備份。
- **Export.csv**：通用的表格格式，可匯入任何試算表軟體。

---

## <span class="material-symbols-rounded">search</span> 進階功能詳解

### 分帳邏輯與結清
系統區分 **直接支出** 與 **共享債務**。
- **代墊**：當您幫朋友付錢時，系統會將此記錄為他們欠您的「債務」。
- **個人份額**：在分帳模式中，您可以精確指定多少金額是自己消費，多少是幫別人代墊。
- **結清**：當朋友還錢時，請記錄一筆 **收款** 類型的交易。這會從朋友的債務餘額中扣除，完成「銷帳」。

### 資料主權：備份與遷移
您的資料屬於您自己。我們提供工具讓您能自由遷移資料。
- **從訪客轉為用戶**：當您首次登入時，系統會偵測本地端是否有訪客資料，並詢問是否要 **合併** 至雲端帳號。
- **JSON vs. CSV**：
    - **JSON**：用於在不同裝置或 Nichi-Nichi 帳號間遷移資料。它保留了所有元數據 (分類、專案、圖示)。
    - **CSV**：用於外部分析。您可以匯入 Excel 製作自己的樞紐分析圖表。
- **完全刪除**：您可以隨時執行「刪除記帳資料」。這會清空資料庫，但保留您的帳號設定。

### 隱私分享與權限控制
分享連結的設計理念是「最小揭露」。
- **姓名遮罩**：若啟用「隱藏姓名」，所有受益人將顯示為「朋友」或代碼。
- **排除專案**：您可以分享「日常採購」的紀錄，同時在同一個連結中完全排除「私人旅遊」的相關支出。
- **撤銷權限**：如果您在設定中刪除某個分享連結，該網址即刻失效，對方將無法再存取。

### 幣別與時區精準度
精確的紀錄是記帳的基石。
- **原始幣別選擇**：記帳時請務必選擇**交易當下使用的幣別** (JPY/TWD)。系統不只是切換顯示，而是儲存實際交易幣別，以確保歷史準確性。
- **時區捕捉**：系統會在存檔時自動記錄您的 **時區位移**。這確保了即使您跨越時區旅行，「今日支出」依然能與您消費當地的時間保持一致。

### 進階統計篩選
**統計 (Stats)** 頁面提供了強大的篩選器，幫助您深入了解消費習慣。
- **不含專案**：使用此功能查看您的「真實生活開銷」。它會排除旅遊等一次性的大額專案支出，讓您專注於日常的生活模式分析。
- **僅顯示我的份額**：如果您常幫人代墊或分帳，此篩選器會由總金額中扣除別人欠您的債務，**僅計算您實際消耗的金額**，提供最精確的個人財務影響視角。

### 總覽頁面運算邏輯
總覽頁面提供高層次的財務摘要：
- **今日支出**：今日所有支出的總和，並依匯率換算為檢視幣別。
- **本月預算**：比較本月支出與上月同期的表現。
- **淨債務**：最關鍵的數字。它是 (別人欠您的錢) 減去 (您欠 App/別人的錢) 的總和。
- **基底幣別偵測**：啟動時，App 會智慧偵測您最近幾筆交易使用的幣別，自動將總覽頁面切換至該幣別顯示。

---

## <span class="material-symbols-rounded">security</span> 帳戶與資料安全

我們提供兩種不同層級的資料移除選項，確保您的隱私與彈性。

### 1. 刪除記帳資料
- **作用**：清空目前帳號內的所有交易、專案與自訂分類。
- **保留項目**：您的 Google 登入狀態保持有效，且應用程式設定 (匯率、使用者暱稱) 會被保留。
- **適用場景**：當您想要「重新開始」新的一年或新的記帳生活，但不想重新註冊帳號時。

### 2. 註銷帳戶
- **作用**：永久移除您的所有身分識別與系統內的關聯資料。
- **保留項目**：無。所有雲端資料與分享連結將立即失效並無法存取。
- **適用場景**：當您不再使用 日日記，並希望徹底清除個人足跡時。
- **安全驗證**：此操作需要重新進行 Google 驗證，以防止誤刪或未經授權的刪除。

---

## <span class="material-symbols-rounded">help</span> 常見問題

### 如何一次刪除多筆紀錄？
1. 前往 **紀錄 (History)** 頁面。
2. **長按** 任何一筆紀錄進入 **多選模式**。
3. 點選您想要移除的項目。
4. 點擊底部的 **紅色垃圾桶** 按鈕。

### 我可以更改匯率設定嗎？
可以。前往 **設定** 並更新 **匯率** 區塊。
